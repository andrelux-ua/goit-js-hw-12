{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48292136-dc008af678147f60b21a3f0d6';\nconst API_URL = 'https://pixabay.com/api/';\n\nexport async function fetchData(inputValue, page = 1, perPage = 15) {\n  try {\n    const params = {\n      key: API_KEY,\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page,\n    };\n\n    const { data } = await axios.get(API_URL, { params });\n\n    if (data.hits.length === 0) {\n      return { images: [], totalHits: 0 };\n    }\n\n    return { images: data.hits, totalHits: data.totalHits };\n  } catch (error) {\n    throw new Error('Failed to fetch data.');\n  }\n}\n","const render = document.querySelector('.gallerylist');\n\nexport function formResults(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <div class=\"gallery-item\">\n            <a href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n            </a>\n            <div class=\"info\">\n                <p class=\"info-text\"><b>Likes:</b> ${likes}</p>\n                <p class=\"info-text\"><b>Views:</b> ${views}</p>\n                <p class=\"info-text\"><b>Comments:</b> ${comments}</p>\n                <p class=\"info-text\"><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </div>\n    `\n    )\n    .join('');\n\n  render.insertAdjacentHTML('beforeend', markup);\n}\n","import { fetchData } from './js/pixabay-api';\nimport { formResults } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst searchForm = document.querySelector('.search-form');\nconst inputText = document.querySelector('.search-form input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.createElement('button');\n\nloadMoreBtn.className = 'load-more-btn';\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\ndocument.querySelector('.gallery-container').appendChild(loadMoreBtn);\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchForm.addEventListener('submit', handleForm);\n\nasync function handleForm(event) {\n  event.preventDefault();\n  const inputValue = inputText.value.trim();\n\n  if (inputValue === '') {\n    return iziToast.info({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Please enter a search query.',\n    });\n  }\n\n  currentQuery = inputValue;\n  currentPage = 1;\n  clearGallery();\n  toggleLoader(true);\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    const { images, totalHits: hits } = await fetchData(\n      currentQuery,\n      currentPage\n    );\n    totalHits = hits;\n\n    if (images.length > 0) {\n      formResults(images);\n      lightbox.refresh();\n      toggleLoadMoreBtn(images.length);\n    } else {\n      iziToast.info({\n        position: 'topRight',\n        title: 'No Results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        titleColor: '#000000',\n        messageColor: '#000000',\n        backgroundColor: '#FFFF00',\n        class: 'result-end',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: error.message,\n      backgroundColor: '#FFFF00',\n    });\n  } finally {\n    toggleLoader(false);\n    searchForm.reset();\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  toggleLoader(true);\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    const { images } = await fetchData(currentQuery, currentPage);\n    formResults(images);\n    lightbox.refresh();\n    toggleLoadMoreBtn(images.length);\n    smoothScroll();\n\n    if (currentPage * 15 >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#7B68EE',\n        class: 'result-end',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: error.message,\n      backgroundColor: '#FFFF00',\n    });\n  } finally {\n    toggleLoader(false);\n  }\n});\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction toggleLoadMoreBtn(count) {\n  loadMoreBtn.style.display =\n    count > 0 && totalHits > currentPage * 15 ? 'block' : 'none';\n}\n\nfunction clearGallery() {\n  document.querySelector('.gallerylist').innerHTML = '';\n}\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector('.gallerylist .gallery-item');\n  if (!firstCard) return;\n  const { height: cardHeight } = firstCard.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// Animated placeholder for search input\nconst inputField = document.querySelector('.search-form input');\nconst placeholderTexts = [\n  'S',\n  'Se',\n  'Sea',\n  'Sear',\n  'Searc',\n  'Search ',\n  'Search i',\n  'Search im',\n  'Search ima',\n  'Search imag',\n  'Search image',\n  'Search images',\n  'Search images.',\n  'Search images..',\n  'Search images...',\n  'c',\n  'ca',\n  'cat',\n  'b',\n  'bo',\n  'boo',\n  'book',\n  'books',\n  'r',\n  'ro',\n  'roo',\n  'room',\n  'f',\n  'fo',\n  'for',\n  'fore',\n  'fores',\n  'forest',\n  'g',\n  'ga',\n  'gar',\n  'gard',\n  'garde',\n  'garden',\n  's',\n  'sp',\n  'spac',\n  'space',\n];\nlet currentIndex = 0;\nlet intervalId;\n\nfunction updatePlaceholder() {\n  inputField.setAttribute('placeholder', placeholderTexts[currentIndex]);\n  currentIndex = (currentIndex + 1) % placeholderTexts.length;\n}\n\nfunction startPlaceholderAnimation() {\n  intervalId = setInterval(updatePlaceholder, 365);\n}\n\nfunction stopPlaceholderAnimation() {\n  clearInterval(intervalId);\n}\n\ninputField.addEventListener('focus', stopPlaceholderAnimation);\ninputField.addEventListener('blur', startPlaceholderAnimation);\n\nupdatePlaceholder();\nstartPlaceholderAnimation();\n"],"names":["API_KEY","API_URL","fetchData","inputValue","page","perPage","params","data","axios","render","formResults","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","inputText","loader","loadMoreBtn","currentPage","currentQuery","totalHits","lightbox","SimpleLightbox","handleForm","event","iziToast","clearGallery","toggleLoader","hits","toggleLoadMoreBtn","error","smoothScroll","show","count","firstCard","cardHeight","inputField","placeholderTexts","currentIndex","intervalId","updatePlaceholder","startPlaceholderAnimation","stopPlaceholderAnimation"],"mappings":"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"}